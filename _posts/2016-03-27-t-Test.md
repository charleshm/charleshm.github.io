---
published: true
author: Charles
layout: post
title:  "t 检验"
date:   2016-03-27 9:30
categories: 机器学习 统计学
---

### $t$ 检验[^2]

![此处输入图片的描述][5]

- 单一样本t检验，检验单个变量的均值是否与给定的常数之间存在差异。即样本均值与总体均值相等的假设。
- 两个独立样本的t检验用于检验两个不相关的样本来自具有相同均值的总体。
- 配对样本t检验（Paired Sample T test）用于检验两个相关的样本是否来自具有相同均值的总体。

$t$ 检验要求两个被比较的样本来自**正态总体**，如果试图比较的变量明显不服从正态分布，则应该考虑使用**非参数检验**(Nonparametric test)。

----------

#### 单个样本的 $t$ 检验
单样本均数 t 检验(one sample t test)，用样本均数代表的未知总体均数和已知总体均数进行比较，来观察此组样本与总体的差异性。

> 应用条件：总体标准差 $\sigma$ 未知的小样本( 如 $n<50$ )，且服从正态分布。

在 $H_0:\mu = \mu_0$ 的假定下，可以认为样本是从已知总体中抽取的，根据t分布的原理，单个样本t检验的公式为：

$$t = \frac{\bar{X}-\mu_0}{S/\sqrt{n}} \tag{1}$$

![此处输入图片的描述][6]

----------

#### 配对双体检验
**配对双体检验**，又称非独立两样本均数 t 检验，其假设两组样本之间的**差值**服从正态分布。如果该正态分布的期望为零，则说明这两组样本不存在显著差异。

> 适用于 **配对设计** 计量资料均数的比较，用于检验两个相关的
样本是否来自具有相同均值的总体。配对设计方法观察以下几种情形：两个**同质**受试对象分别接受两种不同的处理；同一受试对象接受两种不同的处理；同一受试对象处理前后(self-contrast)。

该检验可理解为**差值样本均数**与已知总体均数 $\mu_d(\mu_d = 0)$ 比较的**单样本 t 检验**，其检验统计量为：

$$t = \frac{\bar{d}-\mu_d}{S_{\bar{d}}}=\frac{\bar{d}-0}{S_{\bar{d}}}=\frac{\bar{d}}{S_d/\sqrt{n}} \tag{2}$$

----------

#### 非配对双体检验
**非配对双体检验**，又称为两独立样本 t 检验(成组 t 检验)，其假设两组样本是从不同的正态分布($\mathcal{N}(\mu_1,\sigma_1^2)$,$\mathcal{N}(\mu_2,\sigma_2^2)$)采样出来的。根据两个正态分布的标准差是否相等，非配对双体检验又可以分两类。

 - 两总体方差 $\sigma_1^2,\sigma_2^2$ 相等(F 检验),即**方差齐性**(homogeneity of variance):

> F检验又叫方差齐性检验，用于检验两组服从正态分布的样本是否具有相同的总体方差，即方差齐性。

$$\begin{align*} 
t & = \frac{(\bar{X}_1-\bar{X}_2)-(\mu_1-\mu_2)}{S_{\bar{X}_1-\bar{X}_2}}= \frac{|\bar{X}_1-\bar{X}_2|}{S_{\bar{X}_1-\bar{X}_2}} \tag{3}\\ 
S_{\bar{X}_1-\bar{X}_2} & = \sqrt{S_c^2(\frac{1}{n_1}+\frac{1}{n_2})}\\
S_c &= \sqrt{ \frac{(n_1-1)S_1^2+(n_2-1)S_2^2}{n_1+n_2-2}  } \qquad  \text{合并方差}\nonumber 
\end{align*}$$

![此处输入图片的描述][9]

 - 两总体方差不等,即方差不齐，可采用 $t^{\prime}$ 检验，或进行变量变换，或用 **秩和检验** 方法处理。

----------

#### 举个栗子[^1]

假设一组服从正态分布的数据样本,

$$\begin{eqnarray} 
1.0,\quad1.2,\quad1.4,\quad1.1,\quad1.3,\quad1.2 
\end{eqnarray}$$

我们想知道检验样本均数所代表的总体均数 $\mu$ 是否与已知总体均数 $\mu_0$ 有差别，利用 t 检验:

$$t = \frac{\bar{X}-\mu_0}{S/\sqrt{n}} = 0.2887 \tag{2.1}$$

----------


**步骤1:** 建立检验假设，限定显著性水平.

$$\begin{eqnarray*} 
&\pmb{H}_0: \mu_0=1.1 &\quad\quad \pmb{H}_1: \mu_0 \neq 1.1 & 
\end{eqnarray*} \tag{2.2}$$

这里我们限定显著性水平为 $\alpha = 0.05$.

**步骤2:** 计算检验统计量.

在 $\mu = \mu_0$ 成立的前提条件下，计算统计量为：

$$t = \frac{\bar{X}-\mu_0}{S/\sqrt{n}} = 0.2887 \tag{2.3}$$

**步骤3:** 确定P值，做出推断结论.

本例自由度 $\nu = n-1=5$ （6份数据），显著性水平为 $\alpha = 0.05$ ，查表 $t_{0.05/2,5} = 2.571$. 因为 $t<t_{0.05/2,5}$，故 $P>0.05$，按照 $\alpha=0.05$ 不拒绝零假设 $H_0$ ($\mu_0=1.1$  成立).

![此处输入图片的描述][7]

----------


#### 总结

> 若是**单组设计**，必须给出一个标准值或总体均值，同时，提供一组定量的观测结果，应用 t 检验的前提条件就是该组资料必须服从**正态分布**；若是**配对设计**，每对数据的**差值**必须服从正态分布；若是**成组设计**，个体之间相互独立，两组资料均取自正态分布的总体，并满足**方差齐性**。之所以需要这些前提条件，是因为必须在这样的前提下所计算出的 t 统计量才服从 t 分布，而 t 检验正是以 t 分布作为其理论依据的检验方法。

----------

[5]: http://7xjbdi.com1.z0.glb.clouddn.com/t_ca.png
[6]: http://7xjbdi.com1.z0.glb.clouddn.com/hy_set.png?imageView2/2/w/200
[7]: http://7xjbdi.com1.z0.glb.clouddn.com/2016-03-30_110626.png?imageView2/2/w/400
[9]: http://7xjbdi.com1.z0.glb.clouddn.com/t_ht2.png?imageView2/2/w/400

[^1]: [假设检验原理一:t检验](http://www.gotoli.us/%E7%BB%9F%E8%AE%A1%E5%81%87%E8%AE%BE%E6%A3%80%E9%AA%8C%E4%B8%80t%E6%A3%80%E9%AA%8C)
[^2]: [t 检验](http://jingpin.qmu.edu.cn/yufang/html/kejian.htm)